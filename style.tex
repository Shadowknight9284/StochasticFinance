%%% 
%%% This is a preamble to typeset your homework in math classes
%%% Enhanced for Quantitative Finance Research Papers
%%% 

% Common packages used in LaTeX. 
% You may add more as you need.
\usepackage{amsmath,amssymb,amsthm} % American Mathematical Society
\usepackage{extramarks,titling}     % Formatting
\usepackage{graphicx,tikz,pgfplots} % Figures and plots
\usepackage[shortlabels]{enumitem}  % Lists
\usepackage{float}                  % Floating objects
\usepackage{fancybox,framed}        % Frame
\usepackage{tabularx}
\usepackage{mathrsfs}
\usepackage{algorithm}              % Algorithm environments
\usepackage{algorithmic}            % Algorithm typesetting
\usepackage{listings}               % Code listings
\usepackage{xcolor}                 % Colors
\usepackage{booktabs}               % Professional tables
\usepackage{siunitx}                % SI units
\usepackage{subcaption}             % Subfigures
\usepackage{hyperref}               % Hyperlinks
\usepackage{cleveref}               % Smart references
\pgfplotsset{compat=1.18}

%% Document Settings. Feel free to adjust it.
% Page layout
% \pagestyle{head}
% \firstpageheader{\name}{\course}{\assignment}
% \firstpageheadrule
% \runningheader{\name}{\course}{\assignment}
% \runningheadrule

% Custom environments
\newtheorem{theorem}{Theorem}
\newtheorem{proposition}{Proposition}
\newtheorem{lemma}{Lemma}
\theoremstyle{definition} 
\newtheorem*{definition}{Definition}
\newtheorem*{example}{Example}
\newtheorem*{corollary}{Corollary}
\newtheorem*{exercise}{Exercise}
\newtheorem*{remark}{Remark}
\newtheorem*{problem}{Problem}
\newtheorem*{note}{Note}
\newtheorem*{assumption}{Assumption}
\newtheorem*{strategy}{Strategy}

% Proof environment
\renewcommand{\qedsymbol}{$\blacksquare$}

% Custom command
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\Prob}{\mathbb{P}}
\newcommand{\E}{\mathbb{E}}
\newcommand{\var}{\text{Var}}
\newcommand{\cov}{\text{Cov}}
\newcommand{\corr}{\text{Corr}}
\newcommand{\setof}[1]{\left\{ {#1}\right\}}
\newcommand{\setdef}[2]{\left\{{#1} : {#2}\right\}}
\newcommand{\seq}[1]{\left\{{#1}\right\}_{n=1}^\infty}
\newcommand{\suchthat}{\text{ s.t. }}

% Stochastic Calculus Commands
\newcommand{\SDE}{\text{SDE}}
\newcommand{\PDE}{\text{PDE}}
\newcommand{\BM}{\text{BM}}
\newcommand{\OU}{\text{OU}}
\newcommand{\GBM}{\text{GBM}}
\newcommand{\CIR}{\text{CIR}}
\newcommand{\Vasicek}{\text{Vasicek}}
\newcommand{\HW}{\text{Hull-White}}
\newcommand{\BS}{\text{Black-Scholes}}
\newcommand{\Ito}{It\^{o}}
\newcommand{\Levy}{L\'{e}vy}
\newcommand{\Poisson}{\text{Poisson}}
\newcommand{\Gaussian}{\mathcal{N}}
\newcommand{\Uniform}{\mathcal{U}}
\newcommand{\Exponential}{\text{Exp}}

% Finance-specific commands
\newcommand{\Sharpe}{\text{Sharpe}}
\newcommand{\Sortino}{\text{Sortino}}
\newcommand{\Calmar}{\text{Calmar}}
\newcommand{\VaR}{\text{VaR}}
\newcommand{\CVaR}{\text{CVaR}}
\newcommand{\MDD}{\text{MaxDrawdown}}
\newcommand{\Vol}{\text{Vol}}
\newcommand{\Ret}{\text{Return}}
\newcommand{\PnL}{\text{P\&L}}
\newcommand{\Greeks}{\text{Greeks}}
\newcommand{\Vega}{\text{Vega}}
\newcommand{\Rho}{\rho}

% Market microstructure
\newcommand{\Bid}{\text{Bid}}
\newcommand{\Ask}{\text{Ask}}
\newcommand{\Spread}{\text{Spread}}
\newcommand{\LOB}{\text{LOB}}
\newcommand{\VWAP}{\text{VWAP}}
\newcommand{\TWAP}{\text{TWAP}}
\newcommand{\Implementation}{\text{Implementation}}
\newcommand{\Slippage}{\text{Slippage}}

% Statistical measures
\newcommand{\MLE}{\text{MLE}}
\newcommand{\MAP}{\text{MAP}}
\newcommand{\KL}{\text{KL}}
\newcommand{\AIC}{\text{AIC}}
\newcommand{\BIC}{\text{BIC}}
\newcommand{\RMSE}{\text{RMSE}}
\newcommand{\MAE}{\text{MAE}}
\newcommand{\MAPE}{\text{MAPE}}

% Differential operators
\newcommand{\dif}{\,\mathrm{d}}
\newcommand{\pd}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\pdd}[2]{\frac{\partial^2 #1}{\partial #2^2}}

% Code listing style
\lstdefinestyle{cpp}{
    language=C++,
    backgroundcolor=\color{gray!10},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    commentstyle=\color{green!60!black},
    deletekeywords={...},
    escapeinside={\%*}{*)},
    extendedchars=true,
    frame=single,
    keepspaces=true,
    keywordstyle=\color{blue},
    morekeywords={*,...},
    numbers=left,
    numbersep=5pt,
    numberstyle=\tiny\color{gray},
    rulecolor=\color{black},
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    stepnumber=1,
    stringstyle=\color{red!70!black},
    tabsize=2,
    title=\lstname
}

\lstset{style=cpp}

% Augmented Matrix
\makeatletter
\renewcommand*\env@matrix[1][*\c@MaxMatrixCols c]{%
  \hskip -\arraycolsep
  \let\@ifnextchar\new@ifnextchar
  \array{#1}}
\makeatother
